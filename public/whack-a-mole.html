<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
	<script src="../bootstrap/js/bootstrap.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Revalia' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="stylesheet.css">
	<title>Whack-A-Mole</title>
</head>
<body class='whack-body'>
	<script src="/js/jquery.js"></script>
	<script type="text/javascript">
		
		$(document).ready(function() {
			var interval;
			var gameTime;
			var start = false;
			var count = 0;
			// var missCount = -1;
			var highscore = 0;
			var holes = $('.hole');
			var moleMove;
			var timer = 30;
			var gameStart = document.createElement('audio');
			var bonk = document.createElement('audio');
			gameStart.setAttribute('src', 'sounds/captain-caveman-yell.mp3');
			bonk.setAttribute('src', 'sounds/bonk.mp3');
			
			function game() {
				$('.hole').children().fadeOut();
				// missCount++;
				var rand = Math.floor(Math.random() * holes.length);
				$(holes[rand]).children().fadeIn();
				// console.log(missCount);
			};
			
			$('#count').html(count.toString());

			$('.hole').hide();
			$('#game-over').hide();
			$('#playing').hide();
			$('#start-game').show();
			$('#start-game').click(function() {
				gameStart.play();
				interval = 1500;
				$(this).hide();
				$('.hole').show();
				$('#playing').show();
				$('#game-over').hide();
				moleMove = setInterval(game, interval);
				console.log(interval);
				gameTime = setInterval(function() {
					$('#timer').html("Time Left: " + timer.toString());
					timer--;
				}, 950);

				setTimeout(function() {
					clearInterval(moleMove);
					$('.hole').hide();
					$('#playing').hide();
					$('#game-over').show();
					$('#start-game').show();
					if (highscore < count) {
						highscore = count;
						$('#highscore').html("High Score: " + highscore.toString());
					};
					$('#end-score').html('<p>Your Score was ' + count.toString() + '</p><p>Highscore is ' + highscore.toString() + '</p>');
					start = false;
					count = 0;
					clearInterval(gameTime);
					timer = 30;
					$('#count').html(count.toString());
				}, 30000);
			});

			$('.hole').children().click(function() {
				bonk.play();
				$(this).hide();
				count++;
				$('#count').html(count.toString());

				if ((count !== 0) && (count % 5 === 0)) {
					clearInterval(moleMove);
					interval -= 250;
					console.log(interval);
					moleMove = setInterval(game, interval);
				};
				// missCount--;
			});

		});
	</script>

	<!-- navbar -->
	<div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="row">
				<div class="navbar-header">
					<a href="/resume" class="navbar-brand">CameronHolland.me</a>
					<button class="navbar-toggle" data-toggle="collapse" data-target=".navHeaderCollapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="col-sm-3 col-md-3 navbar-right">
			        <form class="navbar-form" method="GET" action="{{{ action('PostsController@index') }}}">
				        <div class="input-group">
				            <input type="text" class="form-control" placeholder="Search Blog by Keyword" name="search" value='{{ Input::get('search') }}'>
				            <div class="input-group-btn">
				                <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
				            </div>
				        </div>
			        </form>
			    </div>
				<div class="collapse navbar-collapse navHeaderCollapse nav-pills">
					<ul class="nav navbar-nav navbar-right">
						<li class="{{ Request::is('/') ? 'active' : '' }}"><a href="{{{ action('HomeController@showResume') }}}">Resume</a></li>
						<li class="{{ Request::is('portfolio') ? 'active' : '' }}"><a href="{{{ action('HomeController@showPortfolio') }}}">Portfolio</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects<b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li><a href="/yahtzee.php">Yahtzee</a></li>
								<li><a href="/blackjack.php">Blackjack</a></li>
								<li><a href="/connect-four">Connect Four</a></li>
								<li><a href="/whack-a-mole.html">Whack-A-Mole</a></li>
								<li><a href="/simon-says.html">Hypnotoad Says</a></li>
							</ul>
						</li>
						<li class="{{ Request::is('posts') ? 'active' : '' }}"><a href="{{{ action('PostsController@index') }}}">Blog</a></li>
						@if (Auth::check())
							<li><a href="{{{ action('UsersController@logout') }}}">Logout</a></li>
							<li><a href="{{{ action('UsersController@edit', Auth::user()->id) }}}">{{{ Auth::user()->username }}}</a></li>
						@else
							<li class="dropdown">
								<a href="http://www.jquery2dotnet.com" class="dropdown-toggle" data-toggle="dropdown">Sign in <b class="caret"></b></a>
								<ul class="dropdown-menu" style="padding: 15px;min-width: 250px;">
									<li>
										<div class="row">
											<div class="col-md-12">
												@if (Session::has('errorMessage'))
												    <div class="alert alert-danger dif-col">{{{ Session::get('errorMessage') }}}</div>
												@endif
												{{ Form::open(array('action' => 'UsersController@doLogin', 'class' => 'form', 'id' => 'login-nav', 'accept-charset' => 'UTF-8')) }}
													<div class="form-group">
														{{ $errors->has('email') ? $errors->first('email', '<p><span class="help-block">:message</span></p>') : '' }}
														{{ Form::label('email', 'Email address', array('class' => 'sr-only')) }}
														{{ Form::text('email', null, array('class' => 'form-control', 'placeholder' => 'Email or Username')) }}
													</div>
													<div class="form-group">
														{{ $errors->has('password') ? $errors->first('password', '<p><span class="help-block">:message</span></p>') : '' }}
														{{ Form::label('password', 'Password', array('class' => 'sr-only')) }}
														{{ Form::password('password', array('placeholder' => 'Password', 'class' => 'form-control')) }}
													</div>
													<hr>
													<div class="form-group">
														{{ Form::submit('Sign in', array('class' => 'btn btn-success btn-block')); }}
													</div>
												{{ Form::close() }}
												<hr>
												<a href="{{{ action('UsersController@create') }}}" class='btn btn-success col-md-12'>Sign Up</a>
											</div>
										</div>
									</li>
								</ul>
							</li>
						@endif
					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- end navbar -->
	
	<div class='container whack-container'>
		<div class='board'>
			<h1 id='playing' class='page-header'>Whack-A-Mole<small><p>Your Score: <span id='count'>0</span></p><p id='highscore'>High Score: 0</p><p id='timer'>Time Left: 30</p></small></h1>
			<div class='row'>
				<button id='start-game' class='btn btn-success'>Start Game</button>
				<h1 id='game-over' class='page-header'>Game Over <small id='end-score'></small></h1>
				<div class='hole'><img id='1' src="img/Moroccomole.png"/></div>
				<div class='hole'><img id='2' src="img/Moroccomole.png"/></div>
				<div class='hole'><img id='3' src="img/Moroccomole.png"/></div>
			</div>
			<div class='row'>
				<div class='hole'><img id='4' src="img/Moroccomole.png"/></div>
				<div class='hole'><img id='5' src="img/Moroccomole.png"/></div>
				<div class='hole'><img id='6' src="img/Moroccomole.png"/></div>
			</div>
			<div class='row'>
				<div class='hole'><img id='7' src="img/Moroccomole.png"/></div>
				<div class='hole'><img id='8' src="img/Moroccomole.png"/></div>
				<div class='hole'><img id='9' src="img/Moroccomole.png"/></div>
			</div>
		</div>
	</div>
</body>
</html>